---
title: "Figure set 10_3"
output: html_document
---
10/4
Make plots with topo metrics, make final figure set to send to JP

```{r global_options, include=FALSE}
#global settings
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
```

```{r}
#Packages
library(tidyverse)
library(lubridate)
library(ggridges)
```

```{r}
#read in data
topo <- read.csv("topodata 10_4.csv")
temps <- read.csv("Tempswithdmetrics10_3.csv")
#format time and other stuff
temps$rnd.dates <- ymd_hms(temps$rnd.dates)
temps <- temps %>% mutate_each(list(as.factor), sensor)
temps <- temps %>% mutate_each(list(as.character), type, shed)
topo <- topo %>% mutate_each(list(as.character), Site, type, Shed)

#change some of the col names and how I have the sites named
#remove airT
temps.water <- filter(temps, type != "air")
temps.water$site <- gsub('.{2}$', '', temps.water$site)
temps.water <- temps.water %>%
  mutate(type = replace(type, type != "head", "Downstream"))
temps.water <- temps.water %>%
  mutate(type = replace(type, type == "head", "Head"))
topo <- topo %>%
  mutate(type = replace(type, type == "Down", "Downstream"))

#selecting sites, renaming one of the columns in the same function
topo <- topo %>% 
  select(Site, type, Slope..percent.rise., Elevation..ft., UAA..ft2.) %>% 
  rename(site = Site)
#combine the datasets by Site and type
comb <- left_join(temps.water, topo, by = c("site", "type"))
```
  
Plot time
```{r}
#making plots
#Elevation vs distribution
elevators <- ggplot(data = comb, 
                    aes(x = fct_reorder(site, Elevation..ft.),
                        y = Value,
                        fill = type))+
  geom_boxplot()

elevator.ridge <- ggplot(data = comb,
                         aes(x = fct_reorder(site, Elevation..ft.),
                        y = Value,
                        fill = type))+
  geom_density_ridges2(mapping = aes(scale=1))+
  theme_classic()+
  theme(axis.title.y=element_blank(),
        axis.title.x=element_text(size = 17),
        axis.ticks.y=element_blank(),
        strip.text.y = element_text(angle = 180, hjust = 1),
        line = element_blank(),
        axis.text.x = element_text(size = 17),
        axis.text.y = element_text(size = 17))+
  scale_x_continuous( expand = c(0.01, 0)) +
  scale_y_discrete(expand = c(0.001, 0))+
  xlab("Temp (C)")
```

